using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class food_drop : MonoBehaviour
{
    public GameObject leftBoundary;
    public GameObject rightBoundary;
    public float drop_height = 80;
    public GameObject food_good;
    public GameObject food_evil;
    [Range(0.0f, 1.0f)] public float evil_rate = 0.1f; 

    // Start is called before the first frame update
    void Start()
    {
        
    }

    // Update is called once per frame
    void Update()
    {
        Vector4 spawnBox = new Vector4(0,0,0,0);
        if (leftBoundary != null && rightBoundary != null)
        {
            spawnBox.x = leftBoundary.transform.position.x;
            spawnBox.y = leftBoundary.transform.position.z;
            spawnBox.z = rightBoundary.transform.position.x;
            spawnBox.w = rightBoundary.transform.position.y;
        }
        else Debug.LogWarning("No boundaries found.");

        if (Input.GetButtonDown("FireFood"))
        {
            //Debug.Log("Fired food!");
            Vector3 inst_pos = new Vector3(Random.Range(spawnBox.x, spawnBox.z), drop_height, Random.Range(spawnBox.y, spawnBox.w));
            //Debug.Log("InstPos: "+ inst_pos);
            //GameObject food_prefab = Resources.Load() as GameObject;
            if (food_good != null && food_evil != null)
            {
                float rando_check = Random.Range(0.0f, 1.0f);
                if( rando_check <= evil_rate){
                    GameObject new_food = GameObject.Instantiate(food_evil, inst_pos, Quaternion.identity);
                }
                else {
                    GameObject new_food = GameObject.Instantiate(food_good, inst_pos, Quaternion.identity);
                }
                //new_food.GetComponent<Rigidbody>().useGravity = true;
            }
            else {
                Debug.LogWarning("Food not found!");
             }
        }
    }
}
